# JavaScript-Deobjuscation

## Source Code
### Notes
Source Code
- JavaScript: powers functionality, most websites use JavaScript to handle interactive and functional tasks behind the scenes.
- HTML: defines the structure and fields of a website.
- CSS: controls the visual design and layout.
- Client-side execution: JavaScript runs in the background, creating dynamic experiences, while users only interact with the rendered front-end.
- Source code is accessible, although it's executed on the client side, it's all accessible through the browser.
- Analyzing web pages:
  - To understand how a web page works on the client side, start by reviewing the page’s source code.
  - This helps uncover the logic and features implemented through JavaScript and HTML.

HTML
- Use 'Ctrl + U' to open the source view of the page

CSS
- Definition
  - Internal: will be found in the 'Style' field
  - External: will be in the 'link' tag in the HTML 'Head'

JavaScript
- Definition
  - Internal: will be written in between the 'script' elements
  - External: will be referenced in the 'script' tag
- If a JS code is very complicated and difficult to read, then they might be using deobfuscation
  - This includes code structure, or names of variables

### Walkthrough
- Visit the website: http://SERVER_IP:PORT
  - Replace the IP and Port with the one generated by HTB
- Open the source view of the page with 'Ctrl + U'
- The flag will be a comment
- Answer is: HTB{4lw4y5_r34d_7h3_50urc3}

## Code Obfuscation
### Notes
What is Obfuscation?
- Definition:
  - Obfuscation is the process of making code harder for humans to read, while maintaining its original functionality.
  - It may slightly reduce performance due to added complexity.
- How it's done:
  - Typically performed by automated tools.
  - These tools rewrite code using techniques like converting code elements into dictionary references, then rebuilding them at runtime.
- Target languages:
  - Common with interpreted languages (e.g., Python, PHP, JavaScript) that aren’t compiled before execution.
  - Python and PHP are usually server-side (hidden from users), so it's usually not needed
  - JavaScript is client-side, meaning users can view and access it directly—making it a prime candidate for obfuscation.
- Purpose of obfuscation in JavaScript:
  - Prevent users from easily understanding or tampering with the code.
  - Often used to protect intellectual property or conceal malicious behavior.

Use Cases
- Reasons for obfuscation:
  - Code protection: Prevent others from copying or reusing code without permission.
  - Reverse engineering deterrence: Make it harder to analyze or understand the code’s original logic.
  - Security enhancement: Obfuscate sensitive logic related to authentication or encryption.
- Caveat: performing authentication or encryption on the client-side (like in JavaScript) is not recommended, as the code is easily accessible and more vulnerable to attacks.
- Malicious use cases:
  - Attackers frequently use obfuscation to hide the purpose of their scripts.
  - This helps evade Intrusion Detection and Prevention Systems (IDPS).

## Basic Obfuscation
### Notes
- Code obfuscation is typically automated.
- Various tools exist for different programming languages, including many online options.
- Malicious actors and professional developers often create custom obfuscation tools to make deobfuscation harder.

Minifying
- Minification is a technique used to reduce code readability while maintaining full functionality.
- Typically compresses code into a single long line, removing all unnecessary spaces, line breaks, and comments.
- Particularly useful for longer scripts, where it significantly reduces size and improves load performance.
  - For short, single-line code, minification doesn’t make much visible difference.
- Not exclusive to JS, can be applied to other languages
  - Online Tool: https://javascript-minifier.com/
- Usually, minified JS code is saved with the extension .min.js.

Packing
- Packer obfuscation tools convert all words and symbols in code into a list or dictionary.
  - Online Tool: http://beautifytools.com/javascript-obfuscator.php
- These tools then use a (p,a,c,k,e,d) function (or a variant) to reconstruct the original code at runtime.
  - It also defines the order in which elements are unpacked and reassembled.
- While packers effectively reduce readability, they often leave main strings in cleartext, potentially exposing parts of the code’s functionality.
  - More advanced obfuscation methods may be preferred for better concealment.

## Advanced Obfuscation
### Notes
